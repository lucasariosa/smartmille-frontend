<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>SmartMille</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  background:#0f172a;
  font-family: system-ui, sans-serif;
  margin:0;
  padding:40px;
  color:#fff;
}

.container {
  max-width: 480px;
  margin:auto;
}

input, select, button {
  width:100%;
  padding:14px;
  margin-bottom:12px;
  border-radius:8px;
  border:none;
}

button {
  background:#22c55e;
  color:#000;
  font-weight:600;
  cursor:pointer;
}

.carousel {
  margin-top:30px;
  display:grid;
  gap:24px;
}

.slide {
  position:relative;
  width:100%;
  aspect-ratio:4/5;
  overflow:hidden;
  border-radius:16px;
  background:#000;
}

.slide img {
  width:100%;
  height:100%;
  object-fit:cover;
}

.overlay {
  position:absolute;
  inset:0;
  background:linear-gradient(
    to bottom,
    rgba(0,0,0,.75),
    rgba(0,0,0,.85)
  );
  padding:24px;
  display:flex;
  flex-direction:column;
  justify-content:flex-end;
}

.headline {
  font-size:22px;
  font-weight:700;
  margin-bottom:10px;
}

.text {
  font-size:15px;
  line-height:1.4;
}
</style>
</head>

<body>
<div class="container">

<input id="nome" placeholder="Nome do advogado(a)">
<input id="contato" placeholder="WhatsApp">
<input id="area" placeholder="Área de atuação">
<input id="publico" placeholder="Público-alvo">

<select id="tipo">
  <option value="introducao">Introdução</option>
  <option value="definicao">Definição</option>
  <option value="conclusao">Conclusão</option>
</select>

<input id="tema" placeholder="Tema do carrossel">

<button onclick="gerar()">Gerar carrossel</button>

<div id="resultado" class="carousel"></div>
</div>

<script>
async function gerar() {
  const payload = {
    nome: nome.value,
    contato: contato.value,
    area: area.value,
    publico: publico.value,
    tipo: tipo.value,
    tema: tema.value
  };

  const res = await fetch(
    "https://smartmille-backend.onrender.com/gerar-carrossel",
    {
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body: JSON.stringify(payload)
    }
  );

  const data = await res.json();
  resultado.innerHTML = "";

  data.slides.forEach(s => {
    const div = document.createElement("div");
    div.className = "slide";
    div.innerHTML = `
      <img src="data:image/png;base64,${s.imagem}">
      <div class="overlay">
        <div class="headline">${s.headline}</div>
        <div class="text">${s.texto}</div>
      </div>
    `;
    resultado.appendChild(div);
  });
}
</script>

</body>
</html>
